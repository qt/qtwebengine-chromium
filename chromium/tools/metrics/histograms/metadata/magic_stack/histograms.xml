<!--
Copyright 2024 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
This file is used to generate a comprehensive list of magic stack histograms
along with a detailed description for each histogram.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Please follow the instructions in the OWNERS file in this directory to find a
reviewer. If no OWNERS file exists, please consider signing up at
go/reviewing-metrics (Googlers only), as all subdirectories are expected to
have an OWNERS file. As a last resort you can send the CL to
chromium-metrics-reviews@google.com.
-->

<histogram-configuration>

<histograms>

<variants name="ModuleType">
  <variant name="PriceChange"/>
  <variant name="SingleTab"/>
</variants>

<histogram name="MagicStack.Clank.NewTabPage.ContextMenu.OpenCustomizeSettings"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count that the context menu item to open customize settings
    is clicked. The histogram is logged on a NewTabPage and is logged
    Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.NewTabPage.ContextMenu.RemoveModule"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count that the context menu item to remove a module is
    clicked. The histogram is logged on a NewTabPage and is logged Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.NewTabPage.ContextMenu.Shown"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count of times that the context menu of a module is shown
    on the magic stack of a NewTabPage. The histogram is logged on Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.NewTabPage.Module.Click" enum="ModuleType"
    expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count of clicks on different modules of the magic stack on
    the NewTabPage. The histogram is logged on Android-only.
  </summary>
</histogram>

<histogram
    name="MagicStack.Clank.NewTabPage.Module.FetchDataDurationMs.{ModuleType}"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building a module to the time when the module
    returns a successful fetching data response. The histogram is logged when
    showing the magic stack on NewTabPage, Android-only.
  </summary>
  <token key="ModuleType" variants="ModuleType"/>
</histogram>

<histogram
    name="MagicStack.Clank.NewTabPage.Module.FetchDataFailedDurationMs.{ModuleType}"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building a module to the time when the module
    returns a response of no data to show. The histogram is logged when showing
    the magic stack on NewTabPage, Android-only.
  </summary>
  <token key="ModuleType" variants="ModuleType"/>
</histogram>

<histogram
    name="MagicStack.Clank.NewTabPage.Module.FetchDataTimeoutDurationMs.{ModuleType}"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building a module to the time when it returns a
    response after timeout. The histogram is logged when showing the magic stack
    on NewTabPage, Android-only.
  </summary>
  <token key="ModuleType" variants="ModuleType"/>
</histogram>

<histogram name="MagicStack.Clank.NewTabPage.Module.FetchDataTimeoutType"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the types of modules which didn't respond before the timer timeout.
    The histogram is logged when showing the magic stack on NewTabPage,
    Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.NewTabPage.Module.FirstModuleShownDurationMs"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building the first module to the time when the
    recyclerview becomes visible, i.e., the first highest ranking module returns
    valid data. The histogram is logged when showing the magic stack on
    NewTabPage, Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.NewTabPage.Module.TopImpression"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count of times that a module is shown on the magic stack of
    a NewTabPage. The histogram is logged on Android-only.
  </summary>
</histogram>

<histogram
    name="MagicStack.Clank.NewTabPage.Segmentation.FetchRankingResultsDurationMs"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from calling the segmentation API to fetch a ranking to
    the time when a response returns. The histogram is logged when showing the
    magic stack on NewTabPage, Android-only.
  </summary>
</histogram>

<histogram
    name="MagicStack.Clank.StartSurface.ContextMenu.OpenCustomizeSettings"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count that the context menu item to open customize settings
    is clicked. The histogram is logged on the Start surface and is logged
    Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.StartSurface.ContextMenu.RemoveModule"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count that the context menu item to remove a module is
    clicked. The histogram is logged on the Start surface and is logged
    Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.StartSurface.ContextMenu.Shown"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count of times that the context menu of a module is shown
    on the magic stack of the Start surface. The histogram is logged on
    Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.StartSurface.Module.Click" enum="ModuleType"
    expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count of clicks on different modules of the magic stack on
    the Start surface. The histogram is logged on Android-only.
  </summary>
</histogram>

<histogram
    name="MagicStack.Clank.StartSurface.Module.FetchDataDurationMs.{ModuleType}"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building a module to the time when the module
    returns a successful fetching data response. The histogram is logged when
    showing the magic stack on Start surface, Android-only.
  </summary>
  <token key="ModuleType" variants="ModuleType"/>
</histogram>

<histogram
    name="MagicStack.Clank.StartSurface.Module.FetchDataFailedDurationMs.{ModuleType}"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building a module to the time when the module
    returns a response of no data to show. The histogram is logged when showing
    the magic stack on Start surface, Android-only.
  </summary>
  <token key="ModuleType" variants="ModuleType"/>
</histogram>

<histogram
    name="MagicStack.Clank.StartSurface.Module.FetchDataTimeoutDurationMs.{ModuleType}"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building a module to the time when it returns a
    response after timeout. The histogram is logged when showing the magic stack
    on Start surface, Android-only.
  </summary>
  <token key="ModuleType" variants="ModuleType"/>
</histogram>

<histogram name="MagicStack.Clank.StartSurface.Module.FetchDataTimeoutType"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the types of modules which didn't respond before the timer timeout.
    The histogram is logged when showing the magic stack on Start surface,
    Android-only.
  </summary>
</histogram>

<histogram
    name="MagicStack.Clank.StartSurface.Module.FirstModuleShownDurationMs"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from building the first module to the time when the
    recyclerview becomes visible, i.e., the first highest ranking module returns
    valid data. The histogram is logged when showing the magic stack on Start
    surface, Android-only.
  </summary>
</histogram>

<histogram name="MagicStack.Clank.StartSurface.Module.TopImpression"
    enum="ModuleType" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Record the total count of times that a module is shown on the magic stack of
    the Start surface. The histogram is logged on Android-only.
  </summary>
</histogram>

<histogram
    name="MagicStack.Clank.StartSurface.Segmentation.FetchRankingResultsDurationMs"
    units="ms" expires_after="2024-06-20">
  <owner>hanxi@chromium.org</owner>
  <owner>xinyiji@chromium.org</owner>
  <summary>
    Records the duration from calling the segmentation API to fetch a ranking to
    the time when a response returns. The histogram is logged when showing the
    magic stack on Start surface, Android-only.
  </summary>
</histogram>

</histograms>

</histogram-configuration>
