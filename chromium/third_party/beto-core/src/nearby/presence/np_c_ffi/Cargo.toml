[package]
name = "np_c_ffi"
version = "0.1.0"
edition = "2021"
publish = false

[dependencies]
np_ffi_core = { path = "../np_ffi_core" }
lock_adapter = {path = "../../util/lock_adapter"}

[build-dependencies]
cbindgen = "0.24.5"

[features]
default = ["rustcrypto"]
rustcrypto = ["np_ffi_core/rustcrypto"]
boringssl = ["np_ffi_core/boringssl"]

[lib]
# boringssl and bssl-sys are built as a static lib, so we need to as well
crate-type = ["staticlib"]

# build profile optimized for size
[profile.release-min-size]
inherits = "release"
panic = "abort"
codegen-units = 1
lto = true
# z optimizes for size
opt-level = "z"
strip = true